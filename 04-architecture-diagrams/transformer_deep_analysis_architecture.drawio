<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="5.0" etag="xxx" version="22.1.16" type="device">
  <diagram name="Transformeræ·±åº¦è§£æžæž¶æž„å›¾" id="transformer-deep-analysis">
    <mxGraphModel dx="2074" dy="1196" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- æ ‡é¢˜ -->
        <mxCell id="title" value="Transformeræ·±åº¦è§£æžï¼šæ•°å€¼è®¡ç®—è¯¦è§£" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#1f4e79;" vertex="1" parent="1">
          <mxGeometry x="527" y="40" width="600" height="40" as="geometry" />
        </mxCell>
        
        <!-- ä¸»è¦éƒ¨åˆ†å®¹å™¨ -->
        <mxCell id="main-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#dee2e6;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="80" y="120" width="1494" height="2100" as="geometry" />
        </mxCell>
        
        <!-- ç¬¬ä¸€éƒ¨åˆ†ï¼šæ³¨æ„åŠ›æœºåˆ¶ -->
        <mxCell id="attention-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="120" y="160" width="680" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="attention-title" value="ðŸ” ç¬¬ä¸€éƒ¨åˆ†ï¼šæ³¨æ„åŠ›æœºåˆ¶çš„æ•°å€¼è®¡ç®—è¯¦è§£" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#1976d2;" vertex="1" parent="1">
          <mxGeometry x="140" y="180" width="640" height="30" as="geometry" />
        </mxCell>
        
        <!-- è¾“å…¥ç¤ºä¾‹ -->
        <mxCell id="input-example" value="ðŸ“Š è¾“å…¥ç¤ºä¾‹ï¼š&quot;I love AI&quot;\nåˆ†è¯ï¼š[&quot;I&quot;, &quot;love&quot;, &quot;AI&quot;]\nè¯åµŒå…¥ï¼š\n&quot;I&quot; â†’ [1.0, 0.5, 0.2]\n&quot;love&quot; â†’ [0.3, 1.2, 0.8]\n&quot;AI&quot; â†’ [0.7, 0.1, 1.5]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="220" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- QKVçŸ©é˜µç”Ÿæˆ -->
        <mxCell id="qkv-generation" value="ðŸ”§ Qã€Kã€VçŸ©é˜µç”Ÿæˆ\n\nWq (Queryæƒé‡çŸ©é˜µ)\nWk (Keyæƒé‡çŸ©é˜µ)\nWv (Valueæƒé‡çŸ©é˜µ)\n\né€šè¿‡å­¦ä¹ å¾—åˆ°çš„æƒé‡çŸ©é˜µ\nè®¡ç®—æ¯ä¸ªè¯çš„Qã€Kã€Vå‘é‡" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="360" y="220" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- æ³¨æ„åŠ›è®¡ç®— -->
        <mxCell id="attention-calc" value="ðŸŽ¯ æ³¨æ„åŠ›åˆ†æ•°è®¡ç®—\n\n1. è®¡ç®—QÂ·K^T\n2. é™¤ä»¥âˆšd_kç¼©æ”¾\n3. åº”ç”¨Softmaxå½’ä¸€åŒ–\n4. ä¸ŽVç›¸ä¹˜å¾—åˆ°è¾“å‡º\n\nç»“æžœï¼šèžåˆäº†ä¸Šä¸‹æ–‡ä¿¡æ¯\nçš„æ–°è¯è¡¨ç¤º" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="580" y="220" width="200" height="140" as="geometry" />
        </mxCell>
        
        <!-- QKVè§£é‡Š -->
        <mxCell id="qkv-explanation" value="ðŸ¤” ä¸ºä»€ä¹ˆè¦åˆ†ä¸ºQã€Kã€Vï¼Ÿ\n\nðŸª å›¾ä¹¦é¦†æŸ¥è¯¢ç³»ç»Ÿæ¯”å–»ï¼š\nâ€¢ Q (Query): ä½ çš„éœ€æ±‚æè¿°\nâ€¢ K (Key): ä¹¦ç±çš„æ ‡ç­¾/å…³é”®è¯\nâ€¢ V (Value): ä¹¦ç±çš„å®žé™…å†…å®¹\n\næŸ¥è¯¢è¿‡ç¨‹ï¼šéœ€æ±‚ä¸Žæ ‡ç­¾åŒ¹é…ï¼Œæ ¹æ®æƒé‡æå–å†…å®¹" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffa000;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="380" width="640" height="100" as="geometry" />
        </mxCell>
        
        <!-- è®­ç»ƒè¿‡ç¨‹ -->
        <mxCell id="training-process" value="ðŸ‹ï¸ æƒé‡çŸ©é˜µè®­ç»ƒè¿‡ç¨‹\n\n1. éšæœºåˆå§‹åŒ–Wqã€Wkã€Wv\n2. é€šè¿‡å¤§é‡æ–‡æœ¬æ•°æ®å­¦ä¹ \n3. åå‘ä¼ æ’­è°ƒæ•´å‚æ•°\n4. å­¦ä¼šæ­£ç¡®çš„æ³¨æ„åŠ›æ¨¡å¼\n\næœ€ç»ˆï¼šWqå­¦ä¼š&quot;æé—®è‰ºæœ¯&quot;ï¼ŒWkå­¦ä¼š&quot;æ ‡ç­¾è‰ºæœ¯&quot;ï¼ŒWvå­¦ä¼š&quot;æå–è‰ºæœ¯&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#e91e63;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="500" width="640" height="120" as="geometry" />
        </mxCell>
        
        <!-- ç¬¬äºŒéƒ¨åˆ†ï¼šå¤šå¤´æ³¨æ„åŠ› -->
        <mxCell id="multihead-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="840" y="160" width="680" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="multihead-title" value="ðŸŽ­ ç¬¬äºŒéƒ¨åˆ†ï¼šå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶è¯¦è§£" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#7b1fa2;" vertex="1" parent="1">
          <mxGeometry x="860" y="180" width="640" height="30" as="geometry" />
        </mxCell>
        
        <!-- å¤šå¤´åŽŸç† -->
        <mxCell id="multihead-principle" value="ðŸ¤” ä¸ºä»€ä¹ˆéœ€è¦å¤šä¸ª&quot;å¤´&quot;ï¼Ÿ\n\nåŒæ—¶å…³æ³¨ä¸åŒè¯­è¨€çŽ°è±¡ï¼š\nâ€¢ è¯­æ³•å…³ç³»ï¼šä¸»è¯­ã€è°“è¯­ã€å®¾è¯­\nâ€¢ è¯­ä¹‰å…³ç³»ï¼šè¯æ„ç›¸è¿‘æ€§\nâ€¢ æƒ…æ„Ÿè‰²å½©ï¼šç§¯æžã€æ¶ˆæžã€ä¸­æ€§\nâ€¢ æ—¶é—´å…³ç³»ï¼šè¿‡åŽ»ã€çŽ°åœ¨ã€å°†æ¥\n\næ¯ä¸ªå¤´åƒä¸“é—¨çš„åˆ†æžå¸ˆ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="860" y="220" width="300" height="140" as="geometry" />
        </mxCell>
        
        <!-- å¤šå¤´å®žçŽ° -->
        <mxCell id="multihead-impl" value="ðŸ”§ å¤šå¤´æ³¨æ„åŠ›å®žçŽ°\n\n1. åˆ†å‰²è¾“å…¥ï¼ˆ512ç»´â†’8ä¸ª64ç»´ï¼‰\n2. æ¯ä¸ªå¤´ç‹¬ç«‹è®¡ç®—æ³¨æ„åŠ›\n3. ä¸åŒå¤´å…³æ³¨ä¸åŒæ¨¡å¼\n4. æ‹¼æŽ¥æ‰€æœ‰å¤´çš„è¾“å‡º\n5. çº¿æ€§å˜æ¢å¾—åˆ°æœ€ç»ˆç»“æžœ\n\nä¼˜åŠ¿ï¼šå¹¶è¡Œå¤„ç†ã€å¤šè§’åº¦ç†è§£" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1180" y="220" width="320" height="140" as="geometry" />
        </mxCell>
        
        <!-- å¤´çš„ä¸“ä¸šåŒ– -->
        <mxCell id="head-specialization" value="ðŸŽ¯ ä¸åŒå¤´çš„ä¸“ä¸šåŒ–ç¤ºä¾‹\n\nå¤´1ï¼ˆè¯­æ³•å…³æ³¨ï¼‰ï¼š\n&quot;love&quot;å¯¹&quot;I&quot;: 0.70 (ä¸»è°“å…³ç³»å¼º)\n&quot;love&quot;å¯¹&quot;AI&quot;: 0.15 (å®¾è¯­å…³ç³»ä¸€èˆ¬)\n\nå¤´2ï¼ˆè¯­ä¹‰å…³æ³¨ï¼‰ï¼š\n&quot;love&quot;å¯¹&quot;I&quot;: 0.20 (è¯­ä¹‰å…³è”ä¸€èˆ¬)\n&quot;love&quot;å¯¹&quot;AI&quot;: 0.50 (è¯­ä¹‰å…³è”å¼º)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="860" y="380" width="640" height="100" as="geometry" />
        </mxCell>
        
        <!-- å¤šå¤´ä¼˜åŠ¿ -->
        <mxCell id="multihead-advantages" value="ðŸŽ¯ å¤šå¤´æ³¨æ„åŠ›ä¼˜åŠ¿\n\n1. å¹¶è¡Œå¤„ç†ï¼š8ä¸ªå¤´åŒæ—¶è®¡ç®—\n2. å¤šè§’åº¦ç†è§£ï¼šæ¯ä¸ªå¤´å…³æ³¨ä¸åŒçŽ°è±¡\n3. ä¿¡æ¯ä¸°å¯Œï¼šç»¼åˆå¤šä¸ªè§†è§’\n4. é²æ£’æ€§å¼ºï¼šæŸä¸ªå¤´å‡ºé”™ï¼Œå…¶ä»–å¤´è¡¥å¿" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffa000;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="860" y="500" width="640" height="120" as="geometry" />
        </mxCell>
        
        <!-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‰é¦ˆç¥žç»ç½‘ç»œ -->
        <mxCell id="ffn-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="120" y="680" width="680" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="ffn-title" value="âš™ï¸ ç¬¬ä¸‰éƒ¨åˆ†ï¼šå‰é¦ˆç¥žç»ç½‘ç»œçš„æ•°å€¼è¯¦è§£" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#4caf50;" vertex="1" parent="1">
          <mxGeometry x="140" y="700" width="640" height="30" as="geometry" />
        </mxCell>
        
        <!-- FFNç»“æž„ -->
        <mxCell id="ffn-structure" value="ðŸ”§ å‰é¦ˆç½‘ç»œç»“æž„\n\nè¾“å…¥ï¼š512ç»´å‘é‡\nâ†“\nç¬¬ä¸€å±‚çº¿æ€§å˜æ¢ï¼š512â†’2048ç»´\nâ†“\nReLUæ¿€æ´»å‡½æ•°\nâ†“\nç¬¬äºŒå±‚çº¿æ€§å˜æ¢ï¼š2048â†’512ç»´\nâ†“\nè¾“å‡ºï¼š512ç»´å‘é‡" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="740" width="200" height="180" as="geometry" />
        </mxCell>
        
        <!-- æ‰©å±•é˜¶æ®µ -->
        <mxCell id="expansion-stage" value="ðŸ“Š æ‰©å±•é˜¶æ®µï¼ˆ512â†’2048ï¼‰\n\nðŸŽ¯ æ‰©å±•çš„æ„ä¹‰ï¼š\nâ€¢ æä¾›æ›´å¤§çš„&quot;æ€è€ƒç©ºé—´&quot;\nâ€¢ å…è®¸æ›´å¤æ‚çš„ç‰¹å¾ç»„åˆ\nâ€¢ ç±»ä¼¼&quot;å¤´è„‘é£Žæš´&quot;\n\nè®¡ç®—ç¤ºä¾‹ï¼š\nè¾“å…¥Ã—W1+b1 = æ‰©å±•å‘é‡\n[0.5,-0.2,0.8,0.1]â†’[0.61,-0.23,1.45,...]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="360" y="740" width="200" height="180" as="geometry" />
        </mxCell>
        
        <!-- ReLUæ¿€æ´» -->
        <mxCell id="relu-activation" value="ðŸ”¥ ReLUæ¿€æ´»å‡½æ•°\n\nf(x) = max(0, x)\n\nä½œç”¨ï¼š\n1. éžçº¿æ€§ï¼šå­¦ä¹ å¤æ‚æ¨¡å¼\n2. ç¨€ç–æ€§ï¼šè´Ÿå€¼ç½®é›¶\n3. é€‰æ‹©æ€§ï¼šä¿ç•™æœ‰ç”¨ç‰¹å¾\n\nç¤ºä¾‹ï¼š\n[0.61,-0.23,1.45,0.78]\nâ†“ ReLU\n[0.61,0.00,1.45,0.78]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="580" y="740" width="200" height="180" as="geometry" />
        </mxCell>
        
        <!-- åŽ‹ç¼©é˜¶æ®µ -->
        <mxCell id="compression-stage" value="ðŸŽ¯ åŽ‹ç¼©é˜¶æ®µï¼ˆ2048â†’512ï¼‰\n\nåŽ‹ç¼©çš„æ„ä¹‰ï¼š\nâ€¢ æ€»ç»“è¯¦ç»†åˆ†æžä¸ºç²¾ç‚¼ç†è§£\nâ€¢ ä¿ç•™æœ€é‡è¦ä¿¡æ¯\nâ€¢ è¿‡æ»¤å†—ä½™å†…å®¹\nâ€¢ ç±»ä¼¼æ–‡ç« æ‘˜è¦\n\nä¸ºä»€ä¹ˆæ‰©å±•-åŽ‹ç¼©ï¼Ÿ\næ‰©å±•ï¼šæä¾›æ€è€ƒç©ºé—´\nåŽ‹ç¼©ï¼šæç‚¼æ ¸å¿ƒè§‚ç‚¹\néžçº¿æ€§å˜æ¢å­¦ä¹ å¤æ‚æ¨¡å¼" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffa000;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="940" width="640" height="120" as="geometry" />
        </mxCell>
        
        <!-- æ•°å­¦ç›´è§‰ -->
        <mxCell id="math-intuition" value="ðŸ¤” æ•°å­¦ç›´è§‰\n\næ²¡æœ‰æ‰©å±•ï¼ˆçº¿æ€§ï¼‰ï¼šè¾“å‡º = è¾“å…¥Ã—W + b\næœ‰æ‰©å±•-åŽ‹ç¼©ï¼ˆéžçº¿æ€§ï¼‰ï¼šè¾“å‡º = ReLU(è¾“å…¥Ã—W1+b1)Ã—W2+b2\n\néžçº¿æ€§å˜æ¢è®©ç½‘ç»œå­¦ä¹ æ›´å¤æ‚çš„æ¨¡å¼ï¼" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#e91e63;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="1080" width="640" height="60" as="geometry" />
        </mxCell>
        
        <!-- ç¬¬å››éƒ¨åˆ†ï¼šè§£ç å™¨æœºåˆ¶ -->
        <mxCell id="decoder-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffa000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="840" y="680" width="680" height="480" as="geometry" />
        </mxCell>
        
        <mxCell id="decoder-title" value="ðŸŽ­ ç¬¬å››éƒ¨åˆ†ï¼šè§£ç å™¨è¯¦ç»†æœºåˆ¶" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#ffa000;" vertex="1" parent="1">
          <mxGeometry x="860" y="700" width="640" height="30" as="geometry" />
        </mxCell>
        
        <!-- è§£ç å™¨ç»“æž„ -->
        <mxCell id="decoder-structure" value="ðŸ—ï¸ è§£ç å™¨å®Œæ•´ç»“æž„\n\nè§£ç å™¨éœ€è¦ï¼š\n1. ç†è§£å·²ç”Ÿæˆå†…å®¹ï¼ˆæŽ©ç è‡ªæ³¨æ„åŠ›ï¼‰\n2. å‚è€ƒç¼–ç å™¨ç†è§£ï¼ˆç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›ï¼‰\n3. ç”Ÿæˆä¸‹ä¸€ä¸ªè¯ï¼ˆè¾“å‡ºå±‚ï¼‰\n\næ¯”ç¼–ç å™¨æ›´å¤æ‚ï¼" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="860" y="740" width="300" height="140" as="geometry" />
        </mxCell>
        
        <!-- ç”Ÿæˆè¿‡ç¨‹ -->
        <mxCell id="generation-process" value="ðŸŽ¯ ç”Ÿæˆè¿‡ç¨‹ï¼š&quot;I love you&quot;â†’&quot;æˆ‘çˆ±ä½ &quot;\n\næ­¥éª¤1ï¼šç”Ÿæˆ&quot;æˆ‘&quot;\nâ€¢ æŽ©ç è‡ªæ³¨æ„åŠ›ï¼šåªçœ‹&lt;å¼€å§‹&gt;\nâ€¢ ç¼–ç å™¨-è§£ç å™¨æ³¨æ„åŠ›ï¼šå…³æ³¨è‹±æ–‡\nâ€¢ è¾“å‡ºå±‚ï¼šé€‰æ‹©æ¦‚çŽ‡æœ€é«˜çš„&quot;æˆ‘&quot;\n\næ­¥éª¤2ï¼šç”Ÿæˆ&quot;çˆ±&quot;\nâ€¢ æŽ©ç è‡ªæ³¨æ„åŠ›ï¼šçœ‹&lt;å¼€å§‹&gt;+&quot;æˆ‘&quot;\nâ€¢ å…³æ³¨&quot;love&quot;ä¿¡æ¯\nâ€¢ é€‰æ‹©&quot;çˆ±&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1180" y="740" width="320" height="140" as="geometry" />
        </mxCell>
        
        <!-- æŽ©ç æœºåˆ¶ -->
        <mxCell id="mask-mechanism" value="ðŸŽ­ æŽ©ç æœºåˆ¶çš„é‡è¦æ€§\n\nðŸš« æ²¡æœ‰æŽ©ç ï¼šç”Ÿæˆ&quot;çˆ±&quot;æ—¶èƒ½çœ‹åˆ°[&lt;å¼€å§‹&gt;,&quot;æˆ‘&quot;,&quot;çˆ±&quot;,&quot;ä½ &quot;] - è¿™æ˜¯ä½œå¼Šï¼\nâœ… æœ‰æŽ©ç ï¼šç”Ÿæˆ&quot;çˆ±&quot;æ—¶åªèƒ½çœ‹åˆ°[&lt;å¼€å§‹&gt;,&quot;æˆ‘&quot;,???,???] - å¿…é¡»çœŸæ­£ç†è§£\n\næŽ©ç çŸ©é˜µç¡®ä¿æ¨¡åž‹åªèƒ½çœ‹åˆ°å½“å‰ä½ç½®ä¹‹å‰çš„ä¿¡æ¯" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="860" y="900" width="640" height="100" as="geometry" />
        </mxCell>
        
        <!-- è®­ç»ƒvsæŽ¨ç† -->
        <mxCell id="train-vs-inference" value="ðŸ”„ è®­ç»ƒvsæŽ¨ç†çš„åŒºåˆ«\n\nè®­ç»ƒé˜¶æ®µï¼ˆTeacher Forcingï¼‰ï¼š\nâ€¢ è¾“å…¥ï¼š[&lt;å¼€å§‹&gt;,&quot;æˆ‘&quot;,&quot;çˆ±&quot;] ç›®æ ‡ï¼šé¢„æµ‹&quot;ä½ &quot;\nâ€¢ å¯ä»¥å¹¶è¡Œè®¡ç®—æ‰€æœ‰ä½ç½®\nâ€¢ è®­ç»ƒé€Ÿåº¦å¿«\n\næŽ¨ç†é˜¶æ®µï¼ˆè‡ªå›žå½’ç”Ÿæˆï¼‰ï¼š\nâ€¢ æ­¥éª¤1ï¼š[&lt;å¼€å§‹&gt;]â†’ç”Ÿæˆ&quot;æˆ‘&quot;\nâ€¢ æ­¥éª¤2ï¼š[&lt;å¼€å§‹&gt;,&quot;æˆ‘&quot;]â†’ç”Ÿæˆ&quot;çˆ±&quot;\nâ€¢ å¿…é¡»é¡ºåºç”Ÿæˆï¼Œé€Ÿåº¦è¾ƒæ…¢" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#e91e63;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="860" y="1020" width="640" height="120" as="geometry" />
        </mxCell>
        
        <!-- ç¬¬äº”éƒ¨åˆ†ï¼šè®­ç»ƒè¿‡ç¨‹ -->
        <mxCell id="training-section" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fce4ec;strokeColor=#e91e63;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="120" y="1200" width="1400" height="400" as="geometry" />
        </mxCell>
        
        <mxCell id="training-title" value="ðŸŽ“ ç¬¬äº”éƒ¨åˆ†ï¼šè®­ç»ƒvsæŽ¨ç†é˜¶æ®µè¯¦è§£" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;fontColor=#e91e63;" vertex="1" parent="1">
          <mxGeometry x="140" y="1220" width="1360" height="30" as="geometry" />
        </mxCell>
        
        <!-- è®­ç»ƒå‰çŠ¶æ€ -->
        <mxCell id="before-training" value="ðŸ”§ è®­ç»ƒå‰çŠ¶æ€\n\næ‰€æœ‰æƒé‡çŸ©é˜µéšæœºåˆå§‹åŒ–ï¼š\nWq = [[éšæœºæ•°,éšæœºæ•°,...],...]\nWk = [[éšæœºæ•°,éšæœºæ•°,...],...]\nWv = [[éšæœºæ•°,éšæœºæ•°,...],...]\n\næ­¤æ—¶æ¨¡åž‹è¾“å‡ºéšæœºï¼Œæ— æ„ä¹‰" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=#f57c00;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="1260" width="280" height="120" as="geometry" />
        </mxCell>
        
        <!-- è®­ç»ƒè¿‡ç¨‹ -->
        <mxCell id="training-steps" value="ðŸ“š è®­ç»ƒè¿‡ç¨‹\n\n1. å‰å‘ä¼ æ’­ï¼šè¾“å…¥&quot;I love you&quot;\n   å½“å‰è¾“å‡ºï¼š&quot;æˆ‘å–œæ¬¢çŒ«&quot;ï¼ˆé”™è¯¯ï¼‰\n   æ­£ç¡®ç­”æ¡ˆï¼š&quot;æˆ‘çˆ±ä½ &quot;\n\n2. è®¡ç®—æŸå¤±ï¼šäº¤å‰ç†µæŸå¤±å‡½æ•°\n\n3. åå‘ä¼ æ’­ï¼šè®¡ç®—æ¢¯åº¦\n   âˆ‚Loss/âˆ‚Wq, âˆ‚Loss/âˆ‚Wk, âˆ‚Loss/âˆ‚Wv\n\n4. æ›´æ–°å‚æ•°ï¼š\n   Wq_new = Wq_old - å­¦ä¹ çŽ‡Ã—æ¢¯åº¦" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=#7b1fa2;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="440" y="1260" width="320" height="120" as="geometry" />
        </mxCell>
        
        <!-- è®­ç»ƒå®ŒæˆåŽ -->
        <mxCell id="after-training" value="ðŸŽ¯ è®­ç»ƒå®ŒæˆåŽ\n\nâœ… è®­ç»ƒå¥½çš„æ³¨æ„åŠ›æƒé‡ï¼š\nå½“çœ‹åˆ°&quot;love&quot;æ—¶ï¼ŒWqç”ŸæˆQueryå‘é‡\nä¸Ž&quot;you&quot;çš„Keyå‘é‡ç‚¹ç§¯å¾ˆå¤§\nä»Žè€Œè®©&quot;love&quot;é«˜åº¦å…³æ³¨&quot;you&quot;\n\nâœ… è®­ç»ƒå¥½çš„å‰é¦ˆç½‘ç»œï¼š\nå­¦ä¼šè¯†åˆ«åŠ¨è¯ã€åè¯æ¨¡å¼\nå­¦ä¼šç»¼åˆè¯­ä¹‰ä¿¡æ¯\n\nè¿™ä¸æ˜¯äººå·¥è®¾è®¡ï¼Œè€Œæ˜¯æ•°æ®å­¦ä¹ ï¼" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#4caf50;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="780" y="1260" width="320" height="120" as="geometry" />
        </mxCell>
        
        <!-- æŽ¨ç†é˜¶æ®µ -->
        <mxCell id="inference-stage" value="ðŸ”„ æŽ¨ç†é˜¶æ®µ\n\nä½¿ç”¨è®­ç»ƒå¥½çš„å‚æ•°ï¼š\n\nè¾“å…¥ï¼š&quot;I love AI&quot;\n1. ä½¿ç”¨è®­ç»ƒå¥½çš„Wqã€Wkã€Wv\n2. æ³¨æ„åŠ›æœºåˆ¶è‡ªåŠ¨å…³æ³¨ç›¸å…³è¯æ±‡\n3. å‰é¦ˆç½‘ç»œå¤„ç†è¯­ä¹‰ä¿¡æ¯\n4. è§£ç å™¨é€æ­¥ç”Ÿæˆç¿»è¯‘\n\nè¾“å‡ºï¼š&quot;æˆ‘çˆ±äººå·¥æ™ºèƒ½&quot;\n\nå…³é”®ï¼šè®­ç»ƒå­¦ä¹ ç¿»è¯‘èƒ½åŠ›\n      æŽ¨ç†åº”ç”¨ç¿»è¯‘èƒ½åŠ›" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff8e1;strokeColor=#ffa000;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1120" y="1260" width="380" height="120" as="geometry" />
        </mxCell>
        
        <!-- æ ¸å¿ƒæ´žå¯Ÿ -->
        <mxCell id="core-insights" value="ðŸ”‘ æ ¸å¿ƒæ´žå¯Ÿ\n\nTransformerçš„&quot;æ™ºèƒ½&quot;ä¸æ˜¯é­”æ³•ï¼Œè€Œæ˜¯ï¼š\nâ€¢ ç²¾å·§çš„æ•°å­¦è®¾è®¡ï¼ˆQã€Kã€Våˆ†ç¦»ï¼Œå¤šå¤´æ³¨æ„åŠ›ï¼Œå‰é¦ˆç½‘ç»œï¼‰\nâ€¢ å¤§é‡æ•°æ®è®­ç»ƒï¼ˆå­¦ä¹ è¯­è¨€ç»Ÿè®¡è§„å¾‹å’Œè¯­ä¹‰å…³è”ï¼‰\nâ€¢ çŸ©é˜µä¹˜æ³•å®žçŽ°ä¿¡æ¯ç¼–ç ã€ä¼ é€’å’Œç»„åˆ\nâ€¢ å‡ç»´é™ç»´æœºåˆ¶åœ¨é«˜ç»´ç©ºé—´å¤„ç†å¤æ‚è¯­ä¹‰å…³ç³»\n\néšç€æž¶æž„ä¼˜åŒ–å’Œè§„æ¨¡æ‰©å¤§ï¼Œå±•çŽ°å‡ºè¶Šæ¥è¶Šå¼ºå¤§çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆèƒ½åŠ›ï¼" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e3f2fd;strokeColor=#1976d2;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="1400" width="1360" height="80" as="geometry" />
        </mxCell>
        
        <!-- ä¼˜åŒ–æŠ€æœ¯æ¦‚è§ˆ -->
        <mxCell id="optimization-overview" value="ðŸš€ æž¶æž„ä¼˜åŒ–æŠ€æœ¯æ¦‚è§ˆ\n\nâ€¢ é«˜æ•ˆæ³¨æ„åŠ›ï¼šSparse Attentionã€Linear Attentionã€Flash Attention\nâ€¢ ä½ç½®ç¼–ç æ”¹è¿›ï¼šç›¸å¯¹ä½ç½®ç¼–ç ã€RoPEã€ALiBi\nâ€¢ å‚æ•°é«˜æ•ˆå¾®è°ƒï¼šLoRAã€AdaLoRAã€Prefix Tuning\nâ€¢ æ¨¡åž‹è§„æ¨¡åŒ–ï¼šæ··åˆä¸“å®¶æ¨¡åž‹(MoE)ã€æ¨¡åž‹å¹¶è¡Œã€ZeROä¼˜åŒ–å™¨" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#6c757d;align=left;verticalAlign=top;spacingLeft=10;spacingTop=10;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="140" y="1500" width="1360" height="80" as="geometry" />
        </mxCell>
        
        <!-- è¿žæŽ¥çº¿ -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#666666;strokeWidth=2;flowAnimation=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="280" as="sourcePoint" />
            <mxPoint x="350" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;rounded=0;strokeColor=#666666;strokeWidth=2;flowAnimation=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="280" as="sourcePoint" />
            <mxPoint x="570" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- æ•°æ®æµç®­å¤´ -->
        <mxCell id="data-flow1" value="è¯åµŒå…¥" style="endArrow=classic;html=1;rounded=0;strokeColor=#1976d2;strokeWidth=2;fontColor=#1976d2;flowAnimation=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="290" as="sourcePoint" />
            <mxPoint x="350" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="data-flow2" value="Q,K,Vè®¡ç®—" style="endArrow=classic;html=1;rounded=0;strokeColor=#7b1fa2;strokeWidth=2;fontColor=#7b1fa2;flowAnimation=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="290" as="sourcePoint" />
            <mxPoint x="570" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="data-flow3" value="æ³¨æ„åŠ›è¾“å‡º" style="endArrow=classic;html=1;rounded=0;strokeColor=#4caf50;strokeWidth=2;fontColor=#4caf50;flowAnimation=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="360" as="sourcePoint" />
            <mxPoint x="680" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>